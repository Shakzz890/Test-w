:root{
  --primary-color: royalblue;
  --primary-gradient: linear-gradient(to right, rgba(65,105,225,.75), rgba(0,0,0,0));
  --panel-bg-left: linear-gradient(to right, rgba(0,0,0,.9), rgba(0,0,0,.4));
  --panel-bg-right: linear-gradient(to left, rgba(0,0,0,.9), rgba(0,0,0,.4));
  --text-light: #fff;
  --text-medium: #ccc;
  --border-color: #444;
  --settings-item-bg: rgba(255,255,255,0.1);
  --settings-item-hover-bg: rgba(255,255,255,0.2);
  --nav-width: clamp(320px, 25vw, 400px);
}

/* base */
* { font-family: "Lucida Sans", Arial, Helvetica, sans-serif; outline: none; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html, body {
  margin: 0; padding: 0; background: #000; height: 100%;
  font-size: 28px;
  -moz-user-select: none; -webkit-user-select: none; user-select: none;
  /* allow normal taps while preventing errant panning */
  touch-action: manipulation;
  overflow: hidden;
  /* let pointer-events work normally */
}

/* player */
#playerContainer { z-index:1; position: fixed; inset: 0; }
#avplayer {
  width:100%; height:100%; border:0; background:transparent;
  transition: transform .25s ease, object-fit .25s ease, opacity .25s ease;
  opacity: 1; backface-visibility: hidden; will-change: transform, opacity;
}
.fullscreen { inset:0; position: fixed; width:100%; height:100%; }
.HIDDEN { display:none !important; }

/* hide native controls */
.shaka-controls-container, #avplayer::-webkit-media-controls, #avplayer::-moz-media-controls, #avplayer::media-controls { display: none !important; }

/* overlays and modal pointer control: default hidden panels should not receive pointer events */
#BlurOverlay { z-index:25; background: rgba(0,0,0,.6); backdrop-filter: blur(4px); transition: opacity .3s; opacity:0; pointer-events: none; }
#BlurOverlay.visible { opacity:1; pointer-events: auto; }

/* ChannelLoader */
#ChannelLoader{
  z-index:60; display:flex; flex-direction:column; justify-content:center; align-items:center;
  position:absolute; inset:0; pointer-events:none;
  background-image: linear-gradient(rgba(0,0,0,.4), rgba(0,0,0,.4)), url('https://static0.gamerantimages.com/wordpress/wp-content/uploads/2025/04/sung-jinwoo-solo-leveling.jpg');
  background-color:#111; background-size:cover; background-position:center;
  transition: opacity .5s ease-out; opacity:1;
}
#ChannelLoader.fade-out { opacity:0; pointer-events: none; }
.loader-content { text-align:center; color:var(--text-light); pointer-events:auto; }
.loading-spinner { border:4px solid rgba(255,255,255,.3); border-radius:50%; border-top:4px solid var(--primary-color); width:50px; height:50px; animation:spin 1s linear infinite; margin-bottom:20px; margin-inline:auto; }
@keyframes spin { to { transform: rotate(360deg); } }
.loading-text { font-size: clamp(24px,4vw,36px); font-weight:bold; text-shadow:2px 2px 5px #000; margin:0; }

/* close button */
.close-button { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ffffff'%3E%3Cpath d='M13.41,12l6.3-6.29a1,1,0,1,0-1.42-1.42L12,10.59,5.71,4.29A1,1,0,0,0,4.29,5.71L10.59,12l-6.3,6.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L12,13.41l6.29,6.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42Z'/%3E%3C/svg%3E"); background-size:cover; cursor:pointer; position:absolute; z-index:11; top:10px; right:10px; height:40px; width:40px; }

/* z-index groups */
#nav, #ChannelSettings, #ChannelInfo, #Guide, #SettingsModal, #BlurOverlay, #TempMessageOverlay { z-index:100; }

/* temp message */
#TempMessageOverlay { position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background: rgba(0,0,0,.8); color:var(--text-light); padding:10px 20px; border-radius:5px; font-size:clamp(16px,2vw,20px); opacity:0; transition:opacity .3s; pointer-events:none; z-index:110; }
#TempMessageOverlay.visible { opacity:1; pointer-events:auto; }

/* NAV (left) */
#nav {
  position: fixed; top:0; left:0; height:100%;
  width: var(--nav-width); max-width:90%;
  overflow:hidden; transform: translateX(-100%); transition: transform .45s ease;
  font-size: clamp(18px,2.5vw,22px);
  background-image: var(--panel-bg-left);
  /* prevent clicks when hidden */
  pointer-events: none;
  will-change: transform;
}
#nav.visible { transform: translateX(0); pointer-events: auto; }

/* list container */
#list_container { display:flex; width:200%; height:100%; color:var(--text-light); transition: transform .5s ease; transform: translateX(-50%); }
#list_container.groups-opened { transform: translateX(0); }
#GroupList, #ChannelList { height:100%; width:50%; overflow-y:auto; -webkit-overflow-scrolling: touch; }

/* ... other list styles left as-is ... */
h2.list_headline { margin:20px 30px; font-size:clamp(24px,3vw,28px); color:var(--text-medium); }
ul { list-style:none; margin:0; padding:0; }
li { padding:4px 20px; margin:2px 0; white-space:nowrap; cursor:pointer; height:50px; line-height:50px; display:flex; align-items:center; }
li:hover { color:var(--text-light); }
.selected, .modal-selectable.selected { background: var(--primary-gradient) !important; font-weight:bold; }

/* search */
#search_item_wrapper { padding:8px 20px; }
#SearchField { width:100% !important; background: rgba(255,255,255,0.9); display:block; font-size:18px; padding:8px; border-radius:4px; border:2px solid #333; color:#000; }
#SearchField:focus { border-color: var(--primary-color); background-color: var(--text-light); }

/* Right small info panel (channel info) */
#ChannelInfo {
  position: fixed;
  right: 0;
  top: 50%;
  transform: translate(110%, -50%);
  transition: transform .35s ease, opacity .35s ease;
  width: 80%; max-width: 450px; height: auto;
  opacity: 0; color:var(--text-light); border-radius:16px 0 0 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  background-image: linear-gradient(to right, rgba(0,0,0,.4), rgba(0,0,0,.8));
  padding: 15px; display:flex; align-items:center;
  pointer-events: none; will-change: transform, opacity; backface-visibility: hidden;
}
#ChannelInfo.visible { transform: translate(0, -50%); opacity:1; pointer-events:auto; }

/* Channel logo & text */
#ch_logo { flex-shrink:0; width:80px; height:80px; display:flex; align-items:center; justify-content:center; margin-right:15px; }
#ch_logo img { max-width:100%; max-height:100%; object-fit:contain; }
#channel_name { font-size:clamp(22px,3.5vw,32px); font-weight:bold; line-height:1.2; margin-bottom:8px; }
#channel_epg { font-size:clamp(16px,2.5vw,22px); color:var(--text-medium); }

/* Settings panel (right) */
#ChannelSettings {
  position: fixed; top:0; right:0;
  transform: translateX(100%);
  width: clamp(320px,25vw,400px); max-width:90%; height:100%;
  overflow:hidden; transition: transform .45s ease;
  background-image: var(--panel-bg-right); color:var(--text-light);
  pointer-events: none; will-change: transform;
}
#ChannelSettings.visible { transform: translateX(0); pointer-events: auto; }

/* settings container */
#settings_container { position: relative; width: 200%; height: 100%; display:flex; transition: transform .4s ease-in-out; }
#settings_container.submenu-visible { transform: translateX(-50%); }
#SettingsMainMenu, #SettingsVideoFormatMenu { width:50%; height:100%; padding:20px 0; overflow-y:auto; }
.settings-item { padding:15px 25px; cursor:pointer; transition: background-color .2s ease; }
.settings-item.selected { background-color: var(--settings-item-hover-bg); }

/* EPG overlay (full-screen) */
#EpgOverlay {
  background: rgba(0,0,0,.85);
  display:flex; color:var(--text-light);
  transition: left .5s, width .5s;
  left:0; position: fixed; top:0; width:100%; height:100%;
  z-index:101; pointer-events: none;
}
#EpgOverlay.visible { pointer-events: auto; }

/* epg internals */
#EpgChannels { width: clamp(280px,22vw,350px); height:100%; overflow-y:auto; }
#EpgTimeline { flex-grow:1; height:100%; overflow-y:auto; border-left:1px solid var(--border-color); }

/* StreamInfo overlay */
#StreamInfoOverlay { position:absolute; top:20px; left:20px; z-index:10; background:rgba(0,0,0,.6); color:white; padding:10px 15px; border-radius:5px; font-family:Arial,sans-serif; font-size:14px; line-height:1.6; white-space: pre; pointer-events: none; }

/* Idle animation */
#IdleAnimation { z-index:28; display:flex; justify-content:flex-end; align-items:center; background-image: linear-gradient(to right, rgba(0,0,0,.7) 0%, rgba(0,0,0,.3) 50%, rgba(0,0,0,0) 100%), url('https://static0.gamerantimages.com/wordpress/wp-content/uploads/2025/04/sung-jinwoo-solo-leveling.jpg?w=1600&h=900&fit=crop'); background-size:cover; background-position:center; pointer-events: none; }

/* center play button */
#PlayButton { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:120px; height:120px; background: rgba(0,0,0,.5); border-radius:50%; display:flex; justify-content:center; align-items:center; cursor:pointer; transition: background .3s ease; pointer-events:auto; }
#PlayButton:hover { background: rgba(65,105,225,.8); }

/* popup styles */
.fullscreen-popup { position:absolute; top:50%; left:50%; transform: translate(-50%,-50%); width:90%; max-width:500px; background-image: var(--panel-bg-right); color:var(--text-light); border-radius:8px; box-shadow:0 10px 30px rgba(0,0,0,.5); max-height:90vh; display:flex; flex-direction:column; pointer-events:auto; }
.fullscreen-popup h2 { margin:0; font-size: clamp(22px,4vw,28px); padding:20px 25px; }

/* scrollbars and small bits â€” keep existing rules (kept concise here) */
.custom-scrollbar::-webkit-scrollbar { width:10px; }
.custom-scrollbar::-webkit-scrollbar-thumb { background-color: var(--primary-color); border-radius:20px; border:2px solid darkblue; }
.custom-scrollbar::-webkit-scrollbar-track { background:#333; }

/* TEMP: keep single HIDDEN rule */
.HIDDEN { display:none !important; }

/* ---------- MOBILE / SMALL SCREEN ADJUSTMENTS ---------- */
@media (max-width: 700px) {
  /* make right panels full-screen and simpler transforms to avoid off-screen weirdness */
  #ChannelInfo {
    width: 100% !important;
    max-width: 100%;
    right: 0;
    top: 0;
    height: 100%;
    border-radius: 0;
    transform: translateX(100%);
    display: block;
    align-items: flex-start;
    padding-top: 60px; /* give space for top controls if needed */
  }
  #ChannelInfo.visible { transform: translateX(0); opacity:1; pointer-events:auto; }

  #ChannelSettings {
    width: 100% !important;
    max-width: 100%;
    transform: translateX(100%);
    height: 100%;
    border-radius: 0;
  }
  #ChannelSettings.visible { transform: translateX(0); pointer-events:auto; }

  /* nav should slide over content, not push layout */
  #nav { width: 85%; }
}

/* small performance hints */
#nav, #ChannelSettings, #ChannelInfo, #EpgOverlay { backface-visibility: hidden; will-change: transform, opacity; }
